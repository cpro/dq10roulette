- VERSION = '0.2.1'
!!! 5
%html
	%head
		%meta{charset: 'UTF-8'}/
		%meta{'http-equiv' => 'Content-Style-Type', content: 'text/css'}/
		%meta{'http-equiv' => 'Content-Script-Type', content: 'text/javascript'}/
		- @home_uri = 'http://cpro.jp/dq10/roulette/'
		%link{rel: 'canonical', href: @home_uri}/
		%meta{name: 'description', content: 'ドラゴンクエストX（ドラクエ10, DQ10, DQX）のルーレット配置検討用シミュレータ。'}/

		- @title = 'DQ10 ルーレットシミュレータ'
		%title= @title

		%link{rel: 'stylesheet', type: 'text/css', href: "./dq10roulette.css?ver=#{VERSION}"}/
		%link{rel: 'stylesheet', type: 'text/css', href: 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css'}/
		
		%script{type: 'text/javascript', src: 'http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'}
		%script{type: 'text/javascript', src: 'http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js'}
		%script{type: 'text/javascript', src: 'js/rawdeflate.min.js'}
		%script{type: 'text/javascript', src: 'js/rawinflate.min.js'}
		%script{type: 'text/javascript', src: 'js/jquery.socialbutton-1.9.1.min.js'}
		%script{type: 'text/javascript', src: 'js/jquery.mousewheel.min.js'}
		%script{type: 'text/javascript', src: "./dq10roulette.js?ver=#{VERSION}"}
		:javascript
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-5127088-4', 'cpro.jp');
			ga('send', 'pageview');
	%body
		#header
			%h1
				%a{href: @home_uri}= @title
			%p#internal-link
				%a{href: 'http://cpro.jp/dq10/skillsimulator/'} DQ10 スキルシミュレータ
				&nbsp;/&nbsp;
				%a{href: 'http://cpro.jp/dq10/skillsimulator/monster.html'} 仲間モンスター用シミュレータ
				&nbsp;/&nbsp;
				%a{href: 'http://cpro.jp/dq10/skillsimulator/anlucea.html'} アンルシア用シミュレータ
		#body_content
			#board
				%table#boardview
					%tr
						%td#v-0{rowspan: 3} 0
						%td#v-3.red 3
						%td#v-6.blue 6
						%td#v-9.red 9
						%td#v-12.red 12
						%td#v-15.blue 15
						%td#v-18.red 18
						%td#v-21.red 21
						%td#v-24.blue 24
						%td#v-27.red 27
						%td#v-30.red 30
						%td#v-33.blue 33
						%td#v-36.red 36
						%td#v-row-2 &#x2039;
					%tr
						%td#v-2.blue 2
						%td#v-5.red 5
						%td#v-8.blue 8
						%td#v-11.blue 11
						%td#v-14.red 14
						%td#v-17.blue 17
						%td#v-20.blue 20
						%td#v-23.red 23
						%td#v-26.blue 26
						%td#v-29.blue 29
						%td#v-32.red 32
						%td#v-35.blue 35
						%td#v-row-1 &#x2039;
					%tr
						%td#v-1.red 1
						%td#v-4.blue 4
						%td#v-7.red 7
						%td#v-10.blue 10
						%td#v-13.blue 13
						%td#v-16.red 16
						%td#v-19.red 19
						%td#v-22.blue 22
						%td#v-25.red 25
						%td#v-28.blue 28
						%td#v-31.blue 31
						%td#v-34.red 34
						%td#v-row-0 &#x2039;
					%tr
						%td.blank{rowspan: 2}
						%td#v-1-12{colspan: 4} 1-12
						%td#v-13-24{colspan: 4} 13-24
						%td#v-25-36{colspan: 4} 25-36
						%td.blank{rowspan: 2}
					%tr
						%td#v-first-half{colspan: 2} 1-18
						%td#v-even{colspan: 2} EVEN
						%td#v-red.red{colspan: 2} RED
						%td#v-blue.blue{colspan: 2} BLUE
						%td#v-odd{colspan: 2} ODD
						%td#v-second-half{colspan: 2} 19-36
				%table#boardspot
					%tr
						%td#p-0{rowspan: 5}
						%td.spacer{rowspan: 5}
						%td#p-3
						%td#p-3-6
						%td#p-6
						%td#p-6-9
						%td#p-9
						%td#p-9-12
						%td#p-12
						%td#p-12-15
						%td#p-15
						%td#p-15-18
						%td#p-18
						%td#p-18-21
						%td#p-21
						%td#p-21-24
						%td#p-24
						%td#p-24-27
						%td#p-27
						%td#p-27-30
						%td#p-30
						%td#p-30-33
						%td#p-33
						%td#p-33-36
						%td#p-36
						%td.spacer{rowspan: 5}
						%td#p-row-2
					%tr
						%td#p-2-3
						%td#p-2-3-5-6
						%td#p-5-6
						%td#p-5-6-8-9
						%td#p-8-9
						%td#p-8-9-11-12
						%td#p-11-12
						%td#p-11-12-14-15
						%td#p-14-15
						%td#p-14-15-17-18
						%td#p-17-18
						%td#p-17-18-20-21
						%td#p-20-21
						%td#p-20-21-23-24
						%td#p-23-24
						%td#p-23-24-26-27
						%td#p-26-27
						%td#p-26-27-29-30
						%td#p-29-30
						%td#p-29-30-32-33
						%td#p-32-33
						%td#p-32-33-35-36
						%td#p-35-36
						%td.spacer
					%tr
						%td#p-2
						%td#p-2-5
						%td#p-5
						%td#p-5-8
						%td#p-8
						%td#p-8-11
						%td#p-11
						%td#p-11-14
						%td#p-14
						%td#p-14-17
						%td#p-17
						%td#p-17-20
						%td#p-20
						%td#p-20-23
						%td#p-23
						%td#p-23-26
						%td#p-26
						%td#p-26-29
						%td#p-29
						%td#p-29-32
						%td#p-32
						%td#p-32-35
						%td#p-35
						%td#p-row-1
					%tr
						%td#p-1-2
						%td#p-1-2-4-5
						%td#p-4-5
						%td#p-4-5-7-8
						%td#p-7-8
						%td#p-7-8-10-11
						%td#p-10-11
						%td#p-10-11-13-14
						%td#p-13-14
						%td#p-13-14-16-17
						%td#p-16-17
						%td#p-16-17-19-20
						%td#p-19-20
						%td#p-19-20-22-23
						%td#p-22-23
						%td#p-22-23-25-26
						%td#p-25-26
						%td#p-25-26-28-29
						%td#p-28-29
						%td#p-28-29-31-32
						%td#p-31-32
						%td#p-31-32-34-35
						%td#p-34-35
						%td.spacer
					%tr
						%td#p-1
						%td#p-1-4
						%td#p-4
						%td#p-4-7
						%td#p-7
						%td#p-7-10
						%td#p-10
						%td#p-10-13
						%td#p-13
						%td#p-13-16
						%td#p-16
						%td#p-16-19
						%td#p-19
						%td#p-19-22
						%td#p-22
						%td#p-22-25
						%td#p-25
						%td#p-25-28
						%td#p-28
						%td#p-28-31
						%td#p-31
						%td#p-31-34
						%td#p-34
						%td#p-row-0
					%tr
						%td.spacer{rowspan: 4, colspan: 2}
						%td#p-1-2-3
						%td#p-1-2-3-4-5-6
						%td#p-4-5-6
						%td#p-4-5-6-7-8-9
						%td#p-7-8-9
						%td#p-7-8-9-10-11-12
						%td#p-10-11-12
						%td#p-10-11-12-13-14-15
						%td#p-13-14-15
						%td#p-13-14-15-16-17-18
						%td#p-16-17-18
						%td#p-16-17-18-19-20-21
						%td#p-19-20-21
						%td#p-19-20-21-22-23-24
						%td#p-22-23-24
						%td#p-22-23-24-25-26-27
						%td#p-25-26-27
						%td#p-25-26-27-28-29-30
						%td#p-28-29-30
						%td#p-28-29-30-31-32-33
						%td#p-31-32-33
						%td#p-31-32-33-34-35-36
						%td#p-34-35-36
						%td.spacer{rowspan: 4, colspan: 2}
					%tr
						%td#p-1-12{colspan: 7}
						%td.spacer
						%td#p-13-24{colspan: 7}
						%td.spacer
						%td#p-25-36{colspan: 7}
					%tr
						%td.spacer{colspan: 23}
					%tr
						%td#p-first-half{colspan: 3}
						%td.spacer
						%td#p-even{colspan: 3}
						%td.spacer
						%td#p-red{colspan: 3}
						%td.spacer
						%td#p-blue{colspan: 3}
						%td.spacer
						%td#p-odd{colspan: 3}
						%td.spacer
						%td#p-second-half{colspan: 3}
				#hinttooltip
					%p
			#console
				%p
					%button#clear-button クリア
				%form#radio-rate
					%label{for: 'radio-rate'} レート:
					-[1, 10, 100].each do |val|
						%input{type: 'radio', name: 'rate', value: "#{val}"}= val
				%p#save_url
					%label{for: 'url_text'} 保存用URL:
					%input#url_text.ui-widget-content.ui-corner-all{type: 'text', size: 35}>/
					%a#tw-saveurl ツイート
			#stat
				%table#result
					%tr
						%th 出目
						%th
						%th 結果
						%th 出目
						%th
						%th 結果
						%th 出目
						%th
						%th 結果
					%tr
						%td.result-number#result-0 0
						%td.result-arrow →
						%td.result-value#result-value-0
						%td{colspan: 6}
					- (1 .. 36).step(3) do |i|
						%tr
							-(0 .. 2).each do |j|
								%td{id: "result-#{i + j}", 'class' => "result-number result-#{i + j}"}= i + j
								%td{'class' => "result-arrow result-#{i + j}"} →
								%td{id: "result-value-#{i + j}", 'class' => "result-value result-#{i + j}"}
				%table#simulation
					%tr
						%th 合計枚数:
						%td#total-bet
					%tr
						%th 期待値:
						%td#expected-value
					%tr
						%th 外れ確率:
						%td#odds-to-lose
					%tr
						%th 当たり（マイナス）確率:
						%td#odds-to-win-minus
					%tr
						%th 当たり（±0 以上）確率:
						%td#odds-to-win-plus
					%tr
						%th 最小枚数:
						%td#min
					%tr
						%th 最大枚数:
						%td#max
				%table#distribution
					%caption 分布
					%tr.dist-header
						%th{colspan: 2} 枚数
						%th 確率
					-# %tr.dist-entry
						%td.dist-result
						%td.dist-diff
						%td.dist-odds
			#description
				%ul
					%li スクウェア・エニックス『<a href="http://www.dqx.jp/" target="_blank">ドラゴンクエストX 目覚めし五つの種族 オンライン</a>』のルーレットのコイン配置を検討するシミュレータです。
					%li 要JavaScript。Google Chrome, IE10で動作確認。Firefoxでも動くはずです。IE8, 9には対応していません。
					%li
						使い方:
						%ul
							%li チップを置けるところでマウスクリックするとチップを1個増やします。すでに10個ある場合は0個にクリアします。
							%li ダブルクリックすると一気に10個置きます。
							%li マウスホイールを回転するか、マウスボタンを押しながら上下にドラッグすることでチップ個数を増減できます。
							%li 「レート」欄でチップ1個当たりのコイン枚数を設定します。
							%li 「保存用URL」欄に表示されるURLは、アクセスすることで現在の状態を再現できます。メモ用・掲示板に貼る用などにどうぞ。
					%li
						履歴:
						%ul
							%li 2014/1/30 v0.2 マウス操作を改善
							%li 2014/1/28 v0.1 リリース
					-# %li
						ToDo:
						%ul
							%li 
					%li ご意見・ご要望・不具合報告はツイッターの <a href="https://twitter.com/cpro29" target="_blank">@cpro29</a> アカウントまでお願いします。<a href="https://github.com/cpro/dq10roulette/issues" target="_blank">GitHubのIssues</a>で管理しているので、こちらに直接投稿していただいてもかまいません。
				%address<
					%p.contact 連絡先: <a href="https://twitter.com/cpro29" target="_blank">@cpro29</a>
		#ad_sidebar
			%h2 DQ10ツールリンク
			%ul
				%li<
					%a{href: 'http://www.d-quest-10.com/', target: '_blank'} ドラクエ10・モンスター完全図鑑
				%li<
					%a{href: 'http://dq100buster.wiki.fc2.com/', target: '_blank'} DQ10 モンスター100匹討伐隊攻略wiki
				%li<
					%a{href: 'http://tool.kyokugen.info/ParaWt/', target: '_blank'} DQX - 重さチェッカー
				%li<
					%a{href: 'http://dq10battle.wiki.fc2.com/', target: '_blank'} ドラクエ１０私的攻略法的な何か
				%li<
					%a{href: 'http://rizria.com/dqx/search', target: '_blank'} DQ10 モーモンバザー サーチ
			#snsbuttons
				.snsbutton#tw-share
				.snsbutton#fb-like
				.snsbutton#g-plusone
			#ad-items
		:javascript
			jQuery(function($) {
				$('#ad-items').load('./amazon_item_cache.html');

				var sharedUrl = "#{@home_uri}";
				$('#tw-share').socialbutton('twitter', {
					button: 'horizontal',
					url: sharedUrl,
					lang: 'ja',
					hashtags: 'DQ10, dq10_skillsim'
				});
				$('#fb-like').socialbutton('facebook_like', {
					button: 'button_count',
					url: sharedUrl,
					locale: 'ja_JP'
				});
				$('#g-plusone').socialbutton('google_plusone', {
					lang: 'ja',
					size: 'medium',
					url: sharedUrl
				});
			});
